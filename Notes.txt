# Notes

## Pseudo Issues

### Bugs / Fixes needed

    - Remove all LOH on male X & Y
        do this in snakemake (only use -loh for female samples)
        simplify PennCNV rule down to one?

    - str_split for list cols doesn't work properly

    - finalise aggregation of commonly usable functions

### Feature Wishlist

    - More analysis on array & genome
        - (avg) probe density
            -> default density filter?
        - Flag centromers
        - Get q,p arm (sub)cooridinates
            -> some UCSC functions should allow this
        - this should also provide / set chr standard format

    - Proper vcf output:
        - should be generated by preprocess step
        - one combined vcf file (without individual calls?)
            -> need/want to retain individual calls somehow, maybe FILTER?

        Maybe:
        - could replace current preprocess tsv output ?! (undecided)
        - could directly output / convert to vcf for each caller

    - Test & add more CNV callers
        - Ascat (tumor/normal)
        - GLAD (germline)
        - VEGA (germline)

    - Call merging overhaul:
        - merging by number of probes between them
        - merging by relative value
        - merging by absolute value

    - vcf output for variants & filtering change:
        - remove the generation of raw data in tsv format
        - do filtering on the vcf file instead
        - output a filtered vcf file where probes are masked / 'FILTER' is set properly

    - Additional filter options
        - MAF (need to get from databank?)
            - other databank features
        - any of the vcf exported features maybe?
        - some ideas here (3 select SNP markers): https://currentprotocols.onlinelibrary.wiley.com/doi/full/10.1002/cpz1.621

    - generation of CNV reference set shared between celllines

### Report Wishlist

    - CircO plots / golsing / ...


## Mosaicism

Some papers are in zotero, summary:

- many methods are specifically designed for tumors samples, I Mostly ignored those
  - potentially useful perl scripts here: https://baseplugins.thep.lu.se/wiki/se.lu.onk.BAFsegmentation
  -> relies on BAF transformation (remove 0&1, mirror at 0.5, then segment)

- generally done by some specific model on BAF (the PennCNV model i.e., does not cover this); one paper on CDF but without code
- good models/papers/approaches seem to train/evaluate the model based in experimentally mixed samples.
- GADA might be able to do this? would need to be tested
